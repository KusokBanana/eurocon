$(document).ready(function(){$("#project_timeline").on("click",".timeline-edit",function(f){f.preventDefault();var c=$(this).attr("href");var d=$(this).attr("data-type");const g="activate";const a="deactivate";if(d===g||d===a){var b=$("#project_timeline").find(".timeline-item");if(b.length){b.find(".timeline-info.tool-container").toggle("slow")}$(this).attr("data-type",d===g?a:g);$(this).text(d===g?"Done":"Edit")}else{$.ajax({url:c,method:"POST",data:{type:d},success:function(h){if(h){var e=$("#project_timeline_edit");if(e.length){e.remove()}if(d==="delete"){$("#project_timeline").empty().append(h).find('.timeline-edit[data-type="'+g+'"]').trigger("click")}else{$("body").append(h);$("#project_timeline_edit").modal()}}}})}});$("body").on("change",".project-timeline-radio",function(){var a=$(this).val();var b=$(".project-timeline-media-block");b.hide();$('.project-timeline-media-block[data-type="'+a+'"]').show()}).on("submit","#add_project_post_form",function(f){f.preventDefault();var c=$(this),d=c.serialize(),a=c.attr("action");var b=new FormData(c[0]);b.append("image_files",c.find('input[type="file"]').prop("files")[0]);if(!d){return false}$.ajax({url:a,data:b,type:"POST",processData:false,contentType:false,success:function(e){console.log(e);if(e){$("#forum").empty().append(e);c[0].reset();c.closest(".modal").modal("hide")}}})});$("#forum").on("click",".project-forum-reply",function(b){b.preventDefault();var a=$("#"+$(this).attr("data-target"));$(".comment-form").not(a).hide();if(a.is(":hidden")){a.slideToggle("slow")}}).on("click",".comment-form-close",function(a){$(this).closest("form").slideUp("slow")}).on("submit","form.comment-form",function(d){d.preventDefault();var b=$(this),f=b.find("textarea").val(),a=b.attr("action"),c=b.attr("data-target");if(!f||!a){return false}$.ajax({url:a,data:{text:f},method:"POST",success:function(e){if(e){$("#"+c).empty().append(e);b.find("textarea").val("")}}})}).on("click",".project-forum-get-replies",function(d){d.preventDefault();var b=$(this).attr("href"),c=$(this).attr("data-target"),a=$(this).attr("data-loaded");if(!a){$.ajax({url:b,method:"GET",success:function(e){if(e){$("#"+c).empty().append(e);$(this).attr("data-loaded",true)}}})}var f=$(this).attr("data-title");$(this).attr("data-title",$(this).text());$(this).text(f);$("#"+c).slideToggle("slow")})});